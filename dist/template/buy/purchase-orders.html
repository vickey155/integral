<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta name="msapplication-tap-highlight" content="no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>进货单</title>
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="../../global/css/reset.css">
    <link rel="stylesheet" href="../../global/font/style.css">
    <link rel="stylesheet" href="../../global/css/common.css">
    <script type="text/javascript" src="../../global/js/jquery.min.js"></script>
    <script type="text/javascript" src="../../global/js/common.js"></script>
    <script type="text/javascript" src="../../global/js/index-buyer.js"></script>
    <script>
      $(function () {
        if($('.sec-login')[0]){
          document.documentElement.style.fontSize = document.documentElement.clientWidth / 7.5 + 'px';
        }
        else{
          document.documentElement.style.fontSize = document.documentElement.clientWidth / 12.42 + 'px';
        }
      });
      
    </script>
  </head>
  <body>
    <section class="purchase-order">
      <div class="sec">
        <div style="display:none;" class="sec-list-none"><span class="icon-shopcar"></span>
          <p>没有货物， 快去逛逛吧！</p>
        </div>
        <div style="display:block;" class="sec-list">
          <ul id="choose-list">
            <li class="order-one">
              <div class="order-per">
                <div class="circle-choose"><span><i class="icon-ok"></i></span><img src=""></div>
                <div class="order-txt"><span>7047 一件代发纯棉袜子男士四季中筒防臭全棉秋冬款优质产品淘宝爆款</span></div>
                <div class="order-price">
                  <p>单价：<span class="red-font">￥<i class="big-font">22</i>.50</span>/手</p><a class="icon-trash"></a>
                </div>
              </div>
              <div class="order-table">
                <div class="order-table-tr clearfix">
                  <div class="th"> 颜色</div>
                  <div class="th"> 尺码</div>
                  <div class="th"> 进货量(手)</div>
                </div>
                <div class="order-table-tr clearfix">
                  <div class="td">名族风款</div>
                  <div class="td">
                    <p>M (约3-5岁)</p>
                    <p>l (约6-8岁)</p>
                    <p>XL (约9-12岁)</p>
                  </div>
                  <div class="td">
                    <div class="opts-wrap"><a href="javascript:void(0);" class="cut-btn">-</a>
                      <input type="number" value="12" data-defaultval="12" data-price="22.5" class="input-s"><a href="javascript:void(0);" class="add-btn">+</a>
                    </div>
                    <div class="opts-wrap"><a href="javascript:void(0);" class="cut-btn">-</a>
                      <input type="number" value="12" data-defaultval="12" data-price="22.5" class="input-s"><a href="javascript:void(0);" class="add-btn">+</a>
                    </div>
                    <div class="opts-wrap"><a href="javascript:void(0);" class="cut-btn">-</a>
                      <input type="number" value="12" data-defaultval="12" data-price="22.5" class="input-s"><a href="javascript:void(0);" class="add-btn">+</a>
                    </div>
                  </div>
                </div>
                <div class="order-table-tr clearfix">
                  <div class="td">拼色款</div>
                  <div class="td">
                    <p>M (约3-5岁)</p>
                    <p>l (约6-8岁)</p>
                  </div>
                  <div class="td">
                    <div class="opts-wrap"><a href="javascript:void(0);" class="cut-btn">-</a>
                      <input type="number" value="12" data-defaultval="12" data-price="22.5" class="input-s"><a href="javascript:void(0);" class="add-btn">+</a>
                    </div>
                    <div class="opts-wrap"><a href="javascript:void(0);" class="cut-btn">-</a>
                      <input type="number" value="12" data-defaultval="12" data-price="22.5" class="input-s"><a href="javascript:void(0);" class="add-btn">+</a>
                    </div>
                  </div>
                </div>
                <div class="order-table-tr-grey big-font clearfix">
                  <div class="td">商品总价</div>
                  <div class="td"></div>
                  <div class="td">￥<span class="sumPiceS">117.60</span></div>
                </div>
              </div>
            </li>
            <li class="order-one">
              <div class="order-per">
                <div class="circle-choose"><span><i class="icon-ok"></i></span><img src=""></div>
                <div class="order-txt"><span>7047 一件代发纯棉袜子男士四季中筒防臭全棉秋冬款优质产品淘宝爆款</span></div>
                <div class="order-price">
                  <p>单价：<span class="red-font">￥<i class="big-font">22</i>.50</span>/手</p><a class="icon-trash"></a>
                </div>
              </div>
              <div class="order-table">
                <div class="order-table-tr clearfix">
                  <div class="th"> 颜色</div>
                  <div class="th"> 尺码</div>
                  <div class="th"> 进货量(手)</div>
                </div>
                <div class="order-table-tr clearfix">
                  <div class="td">名族风款</div>
                  <div class="td">
                    <p>M (约3-5岁)</p>
                    <p>l (约6-8岁)</p>
                    <p>XL (约9-12岁)</p>
                  </div>
                  <div class="td">
                    <div class="opts-wrap"><a href="javascript:void(0);" class="cut-btn">-</a>
                      <input type="number" value="12" data-defaultval="12" data-price="22.5" class="input-s"><a href="javascript:void(0);" class="add-btn">+</a>
                    </div>
                    <div class="opts-wrap"><a href="javascript:void(0);" class="cut-btn">-</a>
                      <input type="number" value="12" data-defaultval="12" data-price="22.5" class="input-s"><a href="javascript:void(0);" class="add-btn">+</a>
                    </div>
                    <div class="opts-wrap"><a href="javascript:void(0);" class="cut-btn">-</a>
                      <input type="number" value="12" data-defaultval="12" data-price="22.5" class="input-s"><a href="javascript:void(0);" class="add-btn">+</a>
                    </div>
                  </div>
                </div>
                <div class="order-table-tr clearfix">
                  <div class="td">拼色款</div>
                  <div class="td">
                    <p>M (约3-5岁)</p>
                    <p>l (约6-8岁)</p>
                  </div>
                  <div class="td">
                    <div class="opts-wrap"><a href="javascript:void(0);" class="cut-btn">-</a>
                      <input type="number" value="12" data-defaultval="12" data-price="22.5" class="input-s"><a href="javascript:void(0);" class="add-btn">+</a>
                    </div>
                    <div class="opts-wrap"><a href="javascript:void(0);" class="cut-btn">-</a>
                      <input type="number" value="12" data-defaultval="12" data-price="22.5" class="input-s"><a href="javascript:void(0);" class="add-btn">+</a>
                    </div>
                  </div>
                </div>
                <div class="order-table-tr-grey big-font clearfix">
                  <div class="td">商品总价</div>
                  <div class="td"></div>
                  <div class="td">￥<span class="sumPiceS">117.60</span></div>
                </div>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </section>
    <footer class="fixed-footer two-layers">
      <ul class="sec-bottom li-2">
        <li>
          <div id="all-choose" class="circle-choose"><span><i class="icon-ok"></i></span>全选</div>
          <div class="sumNum">
            <p>总计:<span id="sumPrice" class="red-font">￥<i class="big-font">1</i>18.00</span></p>
            <p class="grey-font">1种12件;不含运费</p>
          </div>
        </li>
        <li class="btn-2"><a class="a-btn-bggray delete-btn">删除</a><a class="a-btn-bgred makeorder-btn">下单</a></li>
      </ul>
      <ul class="footer-nav">
        <li><a href="/template/buy/index.html"><span class="icon-home"></span>
            <p>首页</p></a></li>
        <li><a href="/template/buy/goods-sort.html"><span class="icon-link"></span>
            <p>商品分类</p></a></li>
        <li><a href="/template/buy/purchase-orders.html" class="active"><span class="icon-shopcar"></span>
            <p>进货单</p></a></li>
        <li><a href="/template/buy/buyer-center.html"><span class="icon-person"></span>
            <p>个人中心</p></a></li>
      </ul>
    </footer>
    <script>
      $(function(){
        //全选及删除
        var pram = {
          tip: "货品",
          url: ""
        }
        commonEvent.chooseCircle(pram);
        var chooseList = $("#choose-list");
        //列表中删除图标事件
        chooseList.onClick('click', '.icon-trash', function () {
          var sel = $(this);
          var tip = '您确定要删除此订单吗？';
          commonEvent.confirmDialog(tip, function () {
            sel.closest('li.order-one').remove();
            var liLen = chooseList.find('.circle-choose').length;
            if(liLen<=0){
               $(".sec-list-none").show();
               $(".sec-list-none").next('div').hide();
            }
            else{
              $(".sec-list-none").hide();
              $(".sec-list-none").next('div').show();
            }
          });
        });
      
      
        //显示双数及总价
        var showSumNum = function (self) {
          var listOne = self.closest(".order-one");
          var inputNumber = listOne.find('input[type=number]');
          var inputNumberLen = inputNumber.length;
          var totalSum = 0;
          var sumPrice = 0;
          for (var i = 0; i < inputNumberLen; i++) {
            var sel = inputNumber.eq(i);
            var selVal = Number(sel.val());
            var selPrice = Number(sel.data('price'));
            sumPrice += selPrice * selVal;
          }
          listOne.find(".sumPiceS").html(sumPrice);
          $("#choose-list").find('.sumPiceS').each(function(){
            var sel = $(this);
            var selVal = Number(sel.html());
            totalSum += selVal;
          });
          $("#sumPrice").html('￥' + totalSum);
        }
        //初始化
        $("#choose-list").find('input[type=number]').each(function(){
          var sel = $(this);
          showSumNum(sel);
        });
      
        //加减
        commonEvent.addAndCutFun(function (sel) {
          showSumNum(sel);
        });
      
        var checkInputVal =function() {
         var inputObj = $("#choose-list").find("input[type=number]");
         var inputLen = inputObj.length;
         inputObj.each(function(){
           var sel = $(this);
           var selVal = $.trim(sel.val());
           if(selVal == '0'){
               sel.addClass('error-input');
           }
           else{
             sel.removeClass('error-input');
           }
         });
          var errLen = $("#choose-list").find("input.error-input");
          if(errLen == inputLen){
            var tip = "进货量不能都为0";
            commonEvent.validataDialog(tip);
            return false;
          }
          else{
            return true;
          }
        }
      
        //下单
        $(".makeorder-btn").onClick('click',function(){
           if(checkInputVal()){
             alert('ok');
           }
          else{
             alert('fail');
           }
        });
      });
    </script>
  </body>
</html>